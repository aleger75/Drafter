/*! Drafter 08-03-2015 */
(function(){"use strict";var a,b;a=function(a,b,c){a.defaults.headers.common["X-Requested-With"]="XMLHttpRequest",a.defaults.xsrfCookieName="csrftoken",a.defaults.xsrfHeaderName="X-CSRFToken",b.startSymbol("[["),b.endSymbol("]]"),c.otherwise("/")},b=function(a){a.BASE_API="http://127.0.0.1:8000/api",a.VIEWS_URL="/static/build/views/"},angular.module("Drafter",["ui.router","ui.bootstrap","root"]).config(["$httpProvider","$interpolateProvider","$urlRouterProvider",a]).run(["$rootScope",b])}).call(this),function(){"use strict";var a,b;a="/static/build/views/",b=function(b){b.state("root",{"abstract":!0,templateUrl:a+"root.html",controller:"RootCtrl",controllerAs:"root"}).state("root.home",{templateUrl:a+"drafts.html",url:"/",controller:"DraftsCtrl",controllerAs:"drafts"}).state("root.drafts",{url:"/drafts/",templateUrl:a+"drafts.html",controller:"DraftsCtrl",controllerAs:"drafts"}).state("root.new",{url:"/drafts/new/",templateUrl:a+"new_draft.html",controller:"NewDraftCtrl",controllerAs:"nd"})},angular.module("root",[]).config(["$stateProvider",b])}.call(this),function(){"use strict";var a;a=function(a,b,c,d){this.signin=function(){var b;b=this,d.signin(this.username,this.password).then(function(b){a.localStorage.setItem("token",b.data.token),c.token=a.localStorage.getItem("token"),c.modalInstance.close()})},this.register=function(){var b;return b=this,d.register(this.username,this.password,this.email,this.firstName,this.lastName).then(function(){d.signin(b.username,b.password).then(function(b){return a.localStorage.setItem("token",b.data.token),c.token=a.localStorage.getItem("token"),c.modalInstance.close()})})}},angular.module("root").controller("AuthCtrl",["$window","$state","$rootScope","AuthService",a])}.call(this),function(){"use strict";var a;a=function(a){this.getAllDrafts=function(){var b;return b=this,a.getAllDrafts().then(function(a){b.drafts=a.data})},this.getAllDrafts()},angular.module("root").controller("DraftsCtrl",["DraftsService",a])}.call(this),function(){"use strict";var a;a=function(a){this.create=function(){return a.create(this.title,this.tags,this.content)},this.preview=function(){alert("preview")}},angular.module("root").controller("NewDraftCtrl",["NewDraftService",a])}.call(this),function(){"use strict";var a;a=function(a,b,c){var d;this.user={},this.setToken=function(){c.token=a.localStorage.getItem("token")},this.setToken(),this.getUser=function(){this.user=c.token?JSON.parse(atob(c.token.split(".")[1])):void 0},this.getUser(),d=this,b.$watch(function(){return c.token},function(){d.getUser()}),this.signout=function(){a.localStorage.removeItem("token"),c.token=void 0}},angular.module("root").controller("RootCtrl",["$window","$scope","$rootScope",a])}.call(this),function(){"use strict";var a;a=function(a,b){this.signin=function(c,d){return b.post(a.BASE_API+"/accounts/auth/signin/",{username:c,password:d})},this.register=function(c,d,e,f,g){return b.post(a.BASE_API+"/accounts/",{username:c,password:d,email:e,first_name:f,last_name:g})}},angular.module("root").service("AuthService",["$rootScope","$http",a])}.call(this),function(){"use strict";var a;a=function(a,b){this.getAllDrafts=function(){return a.get(b.BASE_API+"/drafts/")},this.getAllTags=function(){return a.get(b.BASE_API+"/tags/")}},angular.module("root").service("DraftsService",["$http","$rootScope",a])}.call(this),function(){"use strict";var a;a=function(a,b){return this.create=function(c,d,e){return b.post(a.BASE_API+"/drafts/",{author:this.user.username,author_id:this.user.user_id,title:c,tags:d,content:e})}},angular.module("root").service("NewDraftService",["$rootScope","$http",a])}.call(this),function(){"use strict";var a;a=function(a){var b;return b={link:function(c,d){b=function(){a.modalInstance.close()},d.bind("click",b)}}},angular.module("root").directive("dfCloseModal",["$rootScope",a])}.call(this),function(){"use strict";var a;a=function(a,b){var c;return c={link:function(d,e){c=function(){a.modalInstance&&a.modalInstance.close(),a.modalInstance=b.open({templateUrl:"/static/build/views/register.html",controller:"AuthCtrl",controllerAs:"auth"})},e.bind("click",c)}}},angular.module("root").directive("dfRegister",["$rootScope","$modal",a])}.call(this),function(){"use strict";var a;a=function(a,b){var c;return c={link:function(d,e){c=function(){a.modalInstance&&a.modalInstance.close(),a.modalInstance=b.open({templateUrl:"/static/build/views/signin.html",controller:"AuthCtrl",controllerAs:"auth"})},e.bind("click",c)}}},angular.module("root").directive("dfSignin",["$rootScope","$modal",a])}.call(this),function(){"use strict";$(document).ready(function(){var a;a=function(a){$(".active").removeClass("active"),a.addClass("active")},$(window).hashchange(function(){var b;b=window.location.hash,b=b.substring(2,b.length-1),b="/"!==b?b:"home",a($("#"+b))}),$(window).hashchange()})}.call(this);